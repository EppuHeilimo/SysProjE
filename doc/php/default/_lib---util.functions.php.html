<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
		<head>
			<!-- template designed by Marco Von Ballmoos -->
			<title>Docs for page util.functions.php</title>
			<link rel="stylesheet" href="../media/stylesheet.css" />
			<meta http-equiv='Content-Type' content='text/html; charset=iso-8859-1'/>
		</head>
		<body>
			<div class="page-body">			
<h2 class="file-name">/lib/util.functions.php</h2>

<a name="sec-description"></a>
<div class="info-box">
	<div class="info-box-title">Description</div>
	<div class="nav-bar">
					<span class="disabled">Description</span> |
									<a href="#sec-includes">Includes</a>
			|											<a href="#sec-functions">Functions</a>
			</div>
	<div class="info-box-body">	
		<!-- ========== Info from phpDoc block ========= -->
		
			</div>
</div>
		

	<a name="sec-includes"></a>	
	<div class="info-box">
		<div class="info-box-title">Includes</div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
						<span class="disabled">Includes</span>
			|													<a href="#sec-functions">Functions</a>
					</div>
		<div class="info-box-body">	
			<a name="___DIR___/__/config/config_php"><!-- --></a>
<div class="oddrow">
	
	<div>
		<span class="include-title">
			<span class="include-type">require_once</span>
			(<span class="include-name">__DIR__.'/../config/config.php'</span>)
			(line <span class="line-number">6</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Utility functions.</p>
	
</div>
<a name="___DIR___/Session_class_php"><!-- --></a>
<div class="evenrow">
	
	<div>
		<span class="include-title">
			<span class="include-type">require_once</span>
			(<span class="include-name">__DIR__.'/Session.class.php'</span>)
			(line <span class="line-number">7</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
	
</div>
<a name="___DIR___/User_class_php"><!-- --></a>
<div class="oddrow">
	
	<div>
		<span class="include-title">
			<span class="include-type">require_once</span>
			(<span class="include-name">__DIR__.'/User.class.php'</span>)
			(line <span class="line-number">8</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
	
</div>
		</div>
	</div>
	
	
	
	<a name="sec-functions"></a>	
	<div class="info-box">
		<div class="info-box-title">Functions</div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
										<a href="#sec-includes">Includes</a>
				|												<span class="disabled">Functions</span>
		</div>
		<div class="info-box-body">	
			<a name="functionautoloader" id="functionautoloader"><!-- --></a>
<div class="evenrow">
	
	<div>
		<span class="method-title">autoloader</span> (line <span class="line-number">108</span>)
	</div> 

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Sets up an autoloader in the given dir. Autoloads (classname).class.php  files from the given directory.</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			autoloader
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$dir</span>)
			</div>

			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$dir</span><span class="var-description">: String to the directory where to autoload from.</span>			</li>
				</ul>
		
	
</div>
<a name="functionclearTokenCookie" id="functionclearTokenCookie"><!-- --></a>
<div class="oddrow">
	
	<div>
		<span class="method-title">clearTokenCookie</span> (line <span class="line-number">97</span>)
	</div> 

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Clears the login token cookie</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			clearTokenCookie
		</span>
				()
			</div>

		
	
</div>
<a name="functiongetUser" id="functiongetUser"><!-- --></a>
<div class="evenrow">
	
	<div>
		<span class="method-title">getUser</span> (line <span class="line-number">122</span>)
	</div> 

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Checks if a user object exists in the session and returns it if it does.</p>
	<ul class="tags">
				<li><span class="field">return:</span> User object if one exists in the session, or null otherwise.</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result"><a href="../default/User.html">User</a></span>
		<span class="method-name">
			getUser
		</span>
				()
			</div>

		
	
</div>
<a name="functionisLoggedIn" id="functionisLoggedIn"><!-- --></a>
<div class="oddrow">
	
	<div>
		<span class="method-title">isLoggedIn</span> (line <span class="line-number">67</span>)
	</div> 

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Checks if a user is logged in.</p>
	<ul class="tags">
				<li><span class="field">return:</span> True if a user is logged in, or false otherwise.</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">bool</span>
		<span class="method-name">
			isLoggedIn
		</span>
				()
			</div>

		
	
</div>
<a name="functionisValidPassword" id="functionisValidPassword"><!-- --></a>
<div class="evenrow">
	
	<div>
		<span class="method-title">isValidPassword</span> (line <span class="line-number">138</span>)
	</div> 

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Checks whether the given password meets all the requirements for passwords.</p>
	<ul class="tags">
				<li><span class="field">return:</span> True if $passwd is a valid password, or false otherwise.</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">bool</span>
		<span class="method-name">
			isValidPassword
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$passwd</span>)
			</div>

			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$passwd</span><span class="var-description">: Password</span>			</li>
				</ul>
		
	
</div>
<a name="functionisValidUsername" id="functionisValidUsername"><!-- --></a>
<div class="oddrow">
	
	<div>
		<span class="method-title">isValidUsername</span> (line <span class="line-number">152</span>)
	</div> 

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Checks whether the given username meets all the requirements for usernames.</p>
	<ul class="tags">
				<li><span class="field">return:</span> True if $username is a valid username, or false otherwise.</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">bool</span>
		<span class="method-name">
			isValidUsername
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$username</span>)
			</div>

			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$username</span><span class="var-description">: Username to test</span>			</li>
				</ul>
		
	
</div>
<a name="functionmakeNewToken" id="functionmakeNewToken"><!-- --></a>
<div class="evenrow">
	
	<div>
		<span class="method-title">makeNewToken</span> (line <span class="line-number">89</span>)
	</div> 

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Makes a new login token for the given user and sets cookie.</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			makeNewToken
		</span>
					(<span class="var-type"><a href="../default/User.html">User</a></span>&nbsp;<span class="var-name">$user</span>)
			</div>

			<ul class="parameters">
					<li>
				<span class="var-type"><a href="../default/User.html">User</a></span>
				<span class="var-name">$user</span><span class="var-description">: The user to make the token for</span>			</li>
				</ul>
		
	
</div>
<a name="functionpw_encode" id="functionpw_encode"><!-- --></a>
<div class="oddrow">
	
	<div>
		<span class="method-title">pw_encode</span> (line <span class="line-number">166</span>)
	</div> 

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Hash a password.</p>
	<ul class="tags">
				<li><span class="field">return:</span> Hashed password</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">string</span>
		<span class="method-name">
			pw_encode
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$password</span>)
			</div>

			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$password</span><span class="var-description">: The password to hash</span>			</li>
				</ul>
		
	
</div>
<a name="functionpw_verify" id="functionpw_verify"><!-- --></a>
<div class="evenrow">
	
	<div>
		<span class="method-title">pw_verify</span> (line <span class="line-number">178</span>)
	</div> 

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Verify that the password matches the given password hash.</p>
	<ul class="tags">
				<li><span class="field">return:</span> True if the password matches, or false otherwise.</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">bool</span>
		<span class="method-name">
			pw_verify
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$password</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$pwhash</span>)
			</div>

			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$password</span><span class="var-description">: Password as plain text</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$pwhash</span><span class="var-description">: Hashed password</span>			</li>
				</ul>
		
	
</div>
<a name="functionrequireLoggedIn" id="functionrequireLoggedIn"><!-- --></a>
<div class="oddrow">
	
	<div>
		<span class="method-title">requireLoggedIn</span> (line <span class="line-number">52</span>)
	</div> 

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Enforces that the user is logged in. If the user isn't logged in,  redirect them to the given address and exit. MUST be called before any  output has been sent to the client, otherwise the function doesn't send headers.</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			requireLoggedIn
		</span>
					([<span class="var-type">string</span>&nbsp;<span class="var-name">$redirect</span> = <span class="var-default">&#039;login.php&#039;</span>])
			</div>

			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$redirect</span><span class="var-description">: The address to redirect to (default login.php), or null for no redirect.</span>			</li>
				</ul>
		
	
</div>
<a name="functionrequireNotLoggedIn" id="functionrequireNotLoggedIn"><!-- --></a>
<div class="evenrow">
	
	<div>
		<span class="method-title">requireNotLoggedIn</span> (line <span class="line-number">35</span>)
	</div> 

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Enforces that the user isn't logged in. If the user is logged in,  redirect them to the given address and exit. MUST be called before any  output has been sent to the client, otherwise the function doesn't send headers.</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			requireNotLoggedIn
		</span>
					([<span class="var-type">string</span>&nbsp;<span class="var-name">$redirect</span> = <span class="var-default">&#039;index.php&#039;</span>])
			</div>

			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$redirect</span><span class="var-description">: The address to redirect to (default index.php), or null for no redirect.</span>			</li>
				</ul>
		
	
</div>
<a name="functionrequireSSL" id="functionrequireSSL"><!-- --></a>
<div class="oddrow">
	
	<div>
		<span class="method-title">requireSSL</span> (line <span class="line-number">17</span>)
	</div> 

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Enforces that HTTPS is used for the connection. If the connection is not  secure, the connection is redirected to HTTPS and exit() is called.</p>
<p class="description"><p>Because the function calls header(), it MUST be called before any  output is sent to the client. If headers have already been sent, the  function does nothing.</p></p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			requireSSL
		</span>
				()
			</div>

		
	
</div>
<a name="functionverifyReCaptcha" id="functionverifyReCaptcha"><!-- --></a>
<div class="evenrow">
	
	<div>
		<span class="method-title">verifyReCaptcha</span> (line <span class="line-number">192</span>)
	</div> 

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Verify a reCAPTCHA. See reCAPTCHA documentation on Google's  site for specifics.</p>
	<ul class="tags">
				<li><span class="field">return:</span> True if the captcha was solved successfully, otherwise false.</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">bool</span>
		<span class="method-name">
			verifyReCaptcha
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$secret</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$response</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$remoteip</span>)
			</div>

			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$secret</span><span class="var-description">: The secret key used for communication with Google's service</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$response</span><span class="var-description">: The value of 'g-recaptcha-response' response from the form</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$remoteip</span><span class="var-description">: The remote user's IP</span>			</li>
				</ul>
		
	
</div>
		</div>
	</div>
	
	<p class="notes" id="credit">
		Documentation generated on Mon, 18 Apr 2016 13:52:24 +0300 by <a href="http://www.phpdoc.org" target="_blank">phpDocumentor 1.4.4</a>
	</p>
	</div></body>
</html>